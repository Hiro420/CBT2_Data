--================================================================
-- 
-- 配置
-- 
--================================================================

-- 怪物
monsters = {
}

-- NPC
npcs = {
}

-- 装置
gadgets = {
	{ config_id = 2393, gadget_id = 70300109, pos = { x = 1718.8, y = 205.8, z = -472.0 }, rot = { x = 0.0, y = 233.7, z = 0.0 }, level = 10 },
	{ config_id = 2394, gadget_id = 70210102, pos = { x = 1725.3, y = 208.6, z = -494.6 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 10, chest_drop_id = 1000100, drop_count = 1, type = GadgetType.GADGET_WORLD_CHECT },
	{ config_id = 2395, gadget_id = 70300109, pos = { x = 1720.6, y = 207.5, z = -491.1 }, rot = { x = 0.0, y = 143.5, z = 0.0 }, level = 10 },
	{ config_id = 2396, gadget_id = 70300109, pos = { x = 1705.7, y = 205.1, z = -470.4 }, rot = { x = 0.0, y = 291.7, z = 0.0 }, level = 10 },
	{ config_id = 2397, gadget_id = 70210102, pos = { x = 1696.4, y = 205.0, z = -455.4 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 10, chest_drop_id = 1000100, drop_count = 1, type = GadgetType.GADGET_WORLD_CHECT },
	{ config_id = 2398, gadget_id = 70300109, pos = { x = 1687.8, y = 202.8, z = -475.1 }, rot = { x = 0.0, y = 306.4, z = 0.0 }, level = 10 },
	{ config_id = 2399, gadget_id = 70300109, pos = { x = 1674.2, y = 201.9, z = -461.3 }, rot = { x = 0.0, y = 322.4, z = 0.0 }, level = 10 },
	{ config_id = 2401, gadget_id = 70210102, pos = { x = 1699.9, y = 204.6, z = -467.8 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 10, chest_drop_id = 1000100, drop_count = 1, type = GadgetType.GADGET_WORLD_CHECT },
	{ config_id = 2402, gadget_id = 70210102, pos = { x = 1696.2, y = 204.9, z = -455.9 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 10, chest_drop_id = 1000200, drop_count = 1, type = GadgetType.GADGET_WORLD_CHECT },
	{ config_id = 2403, gadget_id = 70210102, pos = { x = 1700.5, y = 204.6, z = -467.7 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 10, chest_drop_id = 1000200, drop_count = 1, type = GadgetType.GADGET_WORLD_CHECT },
	{ config_id = 2404, gadget_id = 70220026, pos = { x = 1796.5, y = 218.3, z = -379.2 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 10 },
	{ config_id = 2405, gadget_id = 70220026, pos = { x = 1772.5, y = 213.2, z = -340.7 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 10 },
	{ config_id = 2406, gadget_id = 70300109, pos = { x = 1660.4, y = 201.9, z = -439.5 }, rot = { x = 0.0, y = 11.7, z = 0.0 }, level = 10 },
	{ config_id = 2407, gadget_id = 70300109, pos = { x = 1720.3, y = 206.2, z = -464.2 }, rot = { x = 0.0, y = 187.3, z = 0.0 }, level = 10 },
	{ config_id = 2408, gadget_id = 70300109, pos = { x = 1701.9, y = 205.3, z = -452.9 }, rot = { x = 0.0, y = 237.9, z = 0.0 }, level = 10 },
	{ config_id = 2446, gadget_id = 70300109, pos = { x = 1669.8, y = 202.4, z = -431.5 }, rot = { x = 0.0, y = 81.6, z = 0.0 }, level = 10 },
	{ config_id = 2479, gadget_id = 70300109, pos = { x = 1711.1, y = 206.3, z = -452.8 }, rot = { x = 0.0, y = 257.6, z = 0.0 }, level = 10 },
	{ config_id = 286001, gadget_id = 70300109, pos = { x = 1721.0, y = 210.0, z = -448.5 }, rot = { x = 350.9, y = 239.0, z = 340.7 }, level = 10 },
	{ config_id = 286002, gadget_id = 70300109, pos = { x = 1734.6, y = 214.0, z = -445.8 }, rot = { x = 350.9, y = 260.2, z = 340.7 }, level = 10 },
	{ config_id = 286003, gadget_id = 70300109, pos = { x = 1748.7, y = 216.3, z = -443.8 }, rot = { x = 350.9, y = 260.2, z = 340.7 }, level = 10 },
	{ config_id = 286004, gadget_id = 70300109, pos = { x = 1761.3, y = 217.6, z = -444.4 }, rot = { x = 350.9, y = 260.2, z = 340.7 }, level = 10 },
	{ config_id = 286005, gadget_id = 70300109, pos = { x = 1772.5, y = 217.7, z = -444.3 }, rot = { x = 350.9, y = 260.2, z = 340.7 }, level = 10 },
	{ config_id = 286006, gadget_id = 70300109, pos = { x = 1780.9, y = 217.8, z = -442.2 }, rot = { x = 350.9, y = 260.2, z = 340.7 }, level = 10 },
	{ config_id = 286007, gadget_id = 70300109, pos = { x = 1788.6, y = 217.4, z = -442.6 }, rot = { x = 350.9, y = 260.2, z = 340.7 }, level = 10 },
	{ config_id = 286008, gadget_id = 70300109, pos = { x = 1714.5, y = 205.5, z = -475.9 }, rot = { x = 0.0, y = 168.5, z = 0.0 }, level = 10 },
	{ config_id = 286009, gadget_id = 70300109, pos = { x = 1717.6, y = 206.2, z = -483.8 }, rot = { x = 0.0, y = 168.9, z = 0.0 }, level = 10 },
	{ config_id = 286010, gadget_id = 70300109, pos = { x = 1716.6, y = 207.6, z = -451.9 }, rot = { x = 0.0, y = 188.1, z = 0.0 }, level = 10 },
	{ config_id = 286011, gadget_id = 70300109, pos = { x = 1716.7, y = 206.7, z = -457.8 }, rot = { x = 0.0, y = 148.3, z = 0.0 }, level = 10 },
	{ config_id = 286012, gadget_id = 70300109, pos = { x = 1713.8, y = 205.5, z = -472.2 }, rot = { x = 0.0, y = 281.3, z = 0.0 }, level = 10 }
}

-- 区域
regions = {
}

-- 触发器
triggers = {
	{ name = "GADGET_STATE_CHANGE_387", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_387", action = "action_EVENT_GADGET_STATE_CHANGE_387", trigger_count = 0 },
	{ name = "GADGET_STATE_CHANGE_388", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_388", action = "action_EVENT_GADGET_STATE_CHANGE_388" },
	{ name = "GADGET_STATE_CHANGE_389", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_389", action = "action_EVENT_GADGET_STATE_CHANGE_389" },
	{ name = "GADGET_STATE_CHANGE_390", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_390", action = "action_EVENT_GADGET_STATE_CHANGE_390" }
}

-- 变量
variables = {
}

--================================================================
-- 
-- 初始化配置
-- 
--================================================================

-- 初始化时创建
init_config = {
	suite = 1,
	end_suite = 0,
	rand_suite = false
}

--================================================================
-- 
-- 小组配置
-- 
--================================================================

suites = {
	{
		-- suite_id = 1,
		-- description = ,
		monsters = { },
		gadgets = { },
		regions = { },
		triggers = { },
		rand_weight = 100
	},
	{
		-- suite_id = 2,
		-- description = suite_2,
		monsters = { },
		gadgets = { 2393, 2394, 2395, 2396, 2401, 2402, 2404, 2405, 2407, 2408, 2479, 286001, 286002, 286003, 286004, 286005, 286006, 286007, 286008, 286009, 286010, 286011, 286012 },
		regions = { },
		triggers = { "GADGET_STATE_CHANGE_387", "GADGET_STATE_CHANGE_388", "GADGET_STATE_CHANGE_389", "GADGET_STATE_CHANGE_390" },
		rand_weight = 100
	},
	{
		-- suite_id = 3,
		-- description = suite_3,
		monsters = { },
		gadgets = { 2393, 2394, 2395, 2396, 2397, 2403, 2404, 2405, 2407, 2408, 2479, 286001, 286002, 286003, 286004, 286005, 286006, 286007, 286008, 286009, 286010, 286011, 286012 },
		regions = { },
		triggers = { "GADGET_STATE_CHANGE_387", "GADGET_STATE_CHANGE_388", "GADGET_STATE_CHANGE_389", "GADGET_STATE_CHANGE_390" },
		rand_weight = 100
	}
}

--================================================================
-- 
-- 触发器
-- 
--================================================================

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_387(context, evt)
	if 2394 == evt.param2 and GadgetState.ChestOpened == evt.param1 then
		return true
	end
	
	if 2401 == evt.param2 and GadgetState.ChestOpened == evt.param1 then
		return true
	end
	
	if 2397 == evt.param2 and GadgetState.ChestOpened == evt.param1 then
		return true
	end
	
	return false
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_387(context, evt)
	-- 调用提示id为 1110004 的提示UI，会显示在屏幕中央偏下位置，id索引自 ReminderData表格
	if 0 ~= ScriptLib.ShowReminder(context, 1110004) then
		return -1
	end
	
	return 0
end

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_388(context, evt)
	if 2394 ~= evt.param2 or GadgetState.ChestOpened ~= evt.param1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_388(context, evt)
		-- 杀死Group内指定的monster和gadget
		if 0 ~= ScriptLib.KillGroupEntity(context, { group_id = 133002286, monsters = {}, gadgets = {2395,2480} }) then
			return -1
		end
	
	return 0
end

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_389(context, evt)
	if 2401 ~= evt.param2 or GadgetState.ChestOpened ~= evt.param1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_389(context, evt)
		-- 杀死Group内指定的monster和gadget
		if 0 ~= ScriptLib.KillGroupEntity(context, { group_id = 133002286, monsters = {}, gadgets = {2396} }) then
			return -1
		end
	
	return 0
end

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_390(context, evt)
	if 2397 ~= evt.param2 or GadgetState.ChestOpened ~= evt.param1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_390(context, evt)
		-- 杀死Group内指定的monster和gadget
		if 0 ~= ScriptLib.KillGroupEntity(context, { group_id = 133002286, monsters = {}, gadgets = {2408} }) then
			return -1
		end
	
	return 0
end
