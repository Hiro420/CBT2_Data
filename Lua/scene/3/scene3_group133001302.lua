--================================================================
-- 
-- 配置
-- 
--================================================================

-- 怪物
monsters = {
}

-- NPC
npcs = {
}

-- 装置
gadgets = {
	{ config_id = 3166, gadget_id = 70220013, pos = { x = 1572.6, y = 246.1, z = -1563.0 }, rot = { x = 0.0, y = 10.8, z = 0.0 }, level = 15 },
	{ config_id = 3167, gadget_id = 70220013, pos = { x = 1573.7, y = 246.1, z = -1561.4 }, rot = { x = 0.0, y = 10.8, z = 0.0 }, level = 15 },
	{ config_id = 3168, gadget_id = 70220013, pos = { x = 1560.4, y = 246.1, z = -1561.4 }, rot = { x = 0.0, y = 10.8, z = 0.0 }, level = 15 },
	{ config_id = 3169, gadget_id = 70220013, pos = { x = 1560.4, y = 246.1, z = -1559.4 }, rot = { x = 0.0, y = 43.8, z = 0.0 }, level = 15 },
	{ config_id = 3170, gadget_id = 70210102, pos = { x = 1573.2, y = 246.1, z = -1564.4 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 15, chest_drop_id = 1000100, drop_count = 1, type = GadgetType.GADGET_WORLD_CHECT },
	{ config_id = 3171, gadget_id = 70210102, pos = { x = 1609.8, y = 249.2, z = -1605.6 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 15, chest_drop_id = 1000000, drop_count = 1, type = GadgetType.GADGET_WORLD_CHECT },
	{ config_id = 3172, gadget_id = 70210102, pos = { x = 1604.6, y = 245.9, z = -1584.1 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 15, chest_drop_id = 1000100, drop_count = 1, type = GadgetType.GADGET_WORLD_CHECT },
	{ config_id = 3173, gadget_id = 70220013, pos = { x = 1613.7, y = 246.1, z = -1588.5 }, rot = { x = 0.0, y = 43.8, z = 0.0 }, level = 15 },
	{ config_id = 3185, gadget_id = 70210102, pos = { x = 1604.8, y = 245.9, z = -1584.0 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 15, chest_drop_id = 1000000, drop_count = 1, type = GadgetType.GADGET_WORLD_CHECT },
	{ config_id = 3186, gadget_id = 70210102, pos = { x = 1610.5, y = 249.2, z = -1604.7 }, rot = { x = 0.0, y = 0.0, z = 0.0 }, level = 15, chest_drop_id = 1000100, drop_count = 1, type = GadgetType.GADGET_WORLD_CHECT },
	{ config_id = 3280, gadget_id = 70300109, pos = { x = 1413.8, y = 234.9, z = -1550.7 }, rot = { x = 0.0, y = 186.0, z = 0.0 }, level = 15 },
	{ config_id = 3281, gadget_id = 70300109, pos = { x = 1411.1, y = 235.1, z = -1568.8 }, rot = { x = 0.0, y = 186.0, z = 0.0 }, level = 15 },
	{ config_id = 3282, gadget_id = 70300109, pos = { x = 1424.4, y = 235.8, z = -1590.4 }, rot = { x = 0.0, y = 98.4, z = 0.0 }, level = 15 },
	{ config_id = 3283, gadget_id = 70300109, pos = { x = 1447.7, y = 238.5, z = -1592.9 }, rot = { x = 0.0, y = 98.4, z = 0.0 }, level = 15 },
	{ config_id = 3284, gadget_id = 70300109, pos = { x = 1481.4, y = 238.7, z = -1604.6 }, rot = { x = 0.0, y = 104.3, z = 0.0 }, level = 15 },
	{ config_id = 3285, gadget_id = 70300109, pos = { x = 1511.1, y = 239.2, z = -1614.0 }, rot = { x = 0.0, y = 73.4, z = 0.0 }, level = 15 },
	{ config_id = 3286, gadget_id = 70300109, pos = { x = 1537.4, y = 240.9, z = -1602.5 }, rot = { x = 0.0, y = 55.3, z = 0.0 }, level = 15 },
	{ config_id = 3287, gadget_id = 70300109, pos = { x = 1557.4, y = 243.2, z = -1578.2 }, rot = { x = 0.0, y = 30.7, z = 0.0 }, level = 15 },
	{ config_id = 3288, gadget_id = 70300109, pos = { x = 1566.8, y = 243.7, z = -1578.9 }, rot = { x = 0.0, y = 92.0, z = 0.0 }, level = 15 },
	{ config_id = 3289, gadget_id = 70300109, pos = { x = 1564.8, y = 246.1, z = -1566.1 }, rot = { x = 0.0, y = 45.3, z = 0.0 }, level = 15 },
	{ config_id = 3290, gadget_id = 70300109, pos = { x = 1584.9, y = 244.4, z = -1581.3 }, rot = { x = 0.0, y = 118.8, z = 0.0 }, level = 15 },
	{ config_id = 3291, gadget_id = 70300109, pos = { x = 1597.0, y = 245.0, z = -1584.9 }, rot = { x = 0.0, y = 81.5, z = 0.0 }, level = 15 },
	{ config_id = 3292, gadget_id = 70300109, pos = { x = 1601.5, y = 245.4, z = -1595.1 }, rot = { x = 0.0, y = 136.1, z = 0.0 }, level = 15 },
	{ config_id = 3293, gadget_id = 70300109, pos = { x = 1608.2, y = 247.5, z = -1602.9 }, rot = { x = 27.9, y = 123.0, z = 324.1 }, level = 15 }
}

-- 区域
regions = {
}

-- 触发器
triggers = {
	{ name = "GADGET_STATE_CHANGE_489", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_489", action = "action_EVENT_GADGET_STATE_CHANGE_489", trigger_count = 0 },
	{ name = "GADGET_STATE_CHANGE_490", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_490", action = "action_EVENT_GADGET_STATE_CHANGE_490" },
	{ name = "GADGET_STATE_CHANGE_491", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_491", action = "action_EVENT_GADGET_STATE_CHANGE_491" },
	{ name = "GADGET_STATE_CHANGE_492", event = EventType.EVENT_GADGET_STATE_CHANGE, source = "", condition = "condition_EVENT_GADGET_STATE_CHANGE_492", action = "action_EVENT_GADGET_STATE_CHANGE_492" }
}

-- 变量
variables = {
}

--================================================================
-- 
-- 初始化配置
-- 
--================================================================

-- 初始化时创建
init_config = {
	suite = 1,
	end_suite = 0,
	rand_suite = false
}

--================================================================
-- 
-- 小组配置
-- 
--================================================================

suites = {
	{
		-- suite_id = 1,
		-- description = ,
		monsters = { },
		gadgets = { },
		regions = { },
		triggers = { },
		rand_weight = 100
	},
	{
		-- suite_id = 2,
		-- description = suite_2,
		monsters = { },
		gadgets = { 3166, 3167, 3168, 3169, 3170, 3171, 3172, 3173, 3280, 3281, 3282, 3283, 3284, 3285, 3286, 3287, 3288, 3289, 3290, 3291, 3292, 3293 },
		regions = { },
		triggers = { "GADGET_STATE_CHANGE_489", "GADGET_STATE_CHANGE_490", "GADGET_STATE_CHANGE_491", "GADGET_STATE_CHANGE_492" },
		rand_weight = 100
	},
	{
		-- suite_id = 3,
		-- description = suite_3,
		monsters = { },
		gadgets = { 3166, 3167, 3168, 3169, 3170, 3173, 3185, 3186, 3280, 3281, 3282, 3283, 3284, 3285, 3286, 3287, 3288, 3289, 3290, 3291, 3292, 3293 },
		regions = { },
		triggers = { "GADGET_STATE_CHANGE_489", "GADGET_STATE_CHANGE_490", "GADGET_STATE_CHANGE_491", "GADGET_STATE_CHANGE_492" },
		rand_weight = 100
	}
}

--================================================================
-- 
-- 触发器
-- 
--================================================================

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_489(context, evt)
	if 3170 == evt.param2 and GadgetState.ChestOpened == evt.param1 then
		return true
	end
	
	if 3172 == evt.param2 and GadgetState.ChestOpened == evt.param1 then
		return true
	end
	
	if 3186 == evt.param2 and GadgetState.ChestOpened == evt.param1 then
		return true
	end
	
	return false
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_489(context, evt)
	-- 调用提示id为 1110004 的提示UI，会显示在屏幕中央偏下位置，id索引自 ReminderData表格
	if 0 ~= ScriptLib.ShowReminder(context, 1110004) then
		return -1
	end
	
	return 0
end

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_490(context, evt)
	if 3170 ~= evt.param2 or GadgetState.ChestOpened ~= evt.param1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_490(context, evt)
		-- 杀死Group内指定的monster和gadget
		if 0 ~= ScriptLib.KillGroupEntity(context, { group_id = 133001302, monsters = {}, gadgets = {3289,3287} }) then
			return -1
		end
	
	return 0
end

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_491(context, evt)
	if 3172 ~= evt.param2 or GadgetState.ChestOpened ~= evt.param1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_491(context, evt)
		-- 杀死Group内指定的monster和gadget
		if 0 ~= ScriptLib.KillGroupEntity(context, { group_id = 133001302, monsters = {}, gadgets = {3281} }) then
			return -1
		end
	
	return 0
end

-- 触发条件
function condition_EVENT_GADGET_STATE_CHANGE_492(context, evt)
	if 3186 ~= evt.param2 or GadgetState.ChestOpened ~= evt.param1 then
		return false
	end
	
	return true
end

-- 触发操作
function action_EVENT_GADGET_STATE_CHANGE_492(context, evt)
		-- 杀死Group内指定的monster和gadget
		if 0 ~= ScriptLib.KillGroupEntity(context, { group_id = 133001302, monsters = {}, gadgets = {3293,3292} }) then
			return -1
		end
	
	return 0
end
